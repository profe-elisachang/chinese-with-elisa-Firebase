# Cursor æŒ‡ä»¤ï¼šè¯†å­—è¯¾ç¨‹ Firestore åå°ç®¡ç†é¡µé¢

## ğŸ“Œ é¡¹ç›®éœ€æ±‚æ¦‚è¿°

æ„å»ºä¸€ä¸ª **Firestore åå°ç®¡ç†é¡µé¢**ï¼Œç”¨äºç®¡ç†"è¯†å­—è¯¾ç¨‹"æ•°æ®åº“ã€‚ç”¨æˆ·å¯ä»¥ç›´æ¥ç²˜è´´ AI ç”Ÿæˆçš„ Markdown æ–‡æœ¬ï¼Œç³»ç»Ÿè‡ªåŠ¨è§£æå¹¶æ›´æ–° Firestore æ•°æ®åº“ã€‚

---

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**ï¼šReact + TypeScript
- **æ•°æ®åº“**ï¼šFirebase Firestore
- **UI åº“**ï¼šTailwind CSSï¼ˆæˆ– Shadcn/uiï¼‰
- **å¯Œæ–‡æœ¬ç¼–è¾‘**ï¼šå¯é€‰ï¼ˆMonaco Editor æˆ–ç®€å• Textareaï¼‰
- **éƒ¨ç½²**ï¼šFirebase Hosting

---

## ğŸ“Š Firestore æ•°æ®åº“ç»“æ„

```
/lessons/{lesson_id}
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ vocabulary: [
â”‚       {
â”‚           character: "å­—",
â”‚           meaning: "pÄ«nyÄ«n|english",
â”‚           literacy_sentence: "ä¾‹å¥..."
â”‚       }
â”‚   ]
â”‚   â”œâ”€â”€ phrases: [
â”‚       {
â”‚           content: "è¯ç»„",
â”‚           pinyin: "pÄ«nyÄ«n",
â”‚           meaning: "english"
â”‚       }
â”‚   ]
â”‚   â”œâ”€â”€ exercises: [
â”‚       {
â”‚           subtype: "fill_blank" | "multiple_choice" | "dialogue",
â”‚           content: "é¢˜ç›®",
â”‚           answer: "ç­”æ¡ˆ",
â”‚           options: "A.é€‰|B.é€‰|C.é€‰|D.é€‰"
â”‚       }
â”‚   ]
â”‚   â”œâ”€â”€ grammar: [
â”‚       {
â”‚           lesson_id: "14",
â”‚           subtype: "rule",
â”‚           chinese: "ä¸­æ–‡è¯´æ˜",
â”‚           english: "English translation"
â”‚       }
â”‚   ]
â”œâ”€â”€ meta: {
â”‚    component_count: 0,
â”‚    exercises_count: 0
â”‚}
```

---

## ğŸ¨ é¡µé¢è®¾è®¡

### ä¸»ç•Œé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯†å­—è¯¾ç¨‹ç®¡ç†åå°                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                           â”‚
â”‚  è¯¾ç¨‹é€‰æ‹©: [ä¸‹æ‹‰èœå•] è¯†å­—11              â”‚
â”‚                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å¯¼å…¥ Markdown]  [å¯¼å‡º] [é¢„è§ˆ]  [ä¿å­˜]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Markdown è¾“å…¥åŒºåŸŸ                   â”‚ â”‚
â”‚  â”‚ ï¼ˆç²˜è´´ AI ç”Ÿæˆçš„æ–‡æœ¬ï¼‰              â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¤„ç†ç»“æœæ˜¾ç¤º                             â”‚
â”‚  âœ… å­—è¡¨å¯¼å…¥æˆåŠŸ (30é¡¹)                  â”‚
â”‚  âœ… è¯ç»„å¯¼å…¥æˆåŠŸ (15é¡¹)                  â”‚
â”‚  âœ… è¯­æ³•å¯¼å…¥æˆåŠŸ (5é¡¹)                   â”‚
â”‚  âœ… ç»ƒä¹ å¯¼å…¥æˆåŠŸ (7é¡¹)                   â”‚
â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. Markdown è§£æå™¨
```typescript
// éœ€è¦å®ç°çš„è§£æå‡½æ•°ï¼š

function parseVocabulary(markdown: string): Vocabulary[]
// è§£æå­—è¡¨éƒ¨åˆ†ï¼Œæå–ï¼šå­—ã€æ‹¼éŸ³ã€è‹±æ–‡ã€ä¾‹å¥

function parsePhrases(markdown: string): Phrase[]
// è§£æè¯ç»„éƒ¨åˆ†

function parseExercises(markdown: string): Exercise[]
// è§£æç»ƒä¹ é¢˜ï¼ˆå¡«ç©ºã€é€‰æ‹©ã€å¯¹è¯ï¼‰

function parseGrammar(markdown: string): Grammar[]
// è§£æè¯­æ³•éƒ¨åˆ†ï¼ˆä¸­è‹±æ–‡å¯¹ï¼‰
```

### 2. Firestore æ“ä½œ
```typescript
// éœ€è¦å®ç°çš„æ•°æ®åº“æ“ä½œï¼š

async function uploadToFirestore(
  lessonId: string,
  data: ParsedData
): Promise<void>
// å°†è§£æåçš„æ•°æ®ä¸Šä¼ åˆ° Firestore

async function fetchLessonData(lessonId: string): Promise<any>
// ä» Firestore è·å–è¯¾ç¨‹æ•°æ®

async function updateComponent(
  lessonId: string,
  componentType: string,
  data: any
): Promise<void>
// æ›´æ–°ç‰¹å®šç»„ä»¶
```

### 3. UI ç»„ä»¶
- **LessonSelector**ï¼šé€‰æ‹©è¯¾ç¨‹
- **MarkdownEditor**ï¼šç²˜è´´ Markdown æ–‡æœ¬
- **PreviewPanel**ï¼šå®æ—¶é¢„è§ˆè§£æç»“æœ
- **UploadButton**ï¼šä¸Šä¼ åˆ° Firestore
- **StatusMessage**ï¼šæ˜¾ç¤ºå¯¼å…¥ç»“æœ

---

## ğŸ“ Markdown è¾“å…¥æ ¼å¼

ç”¨æˆ·ç²˜è´´çš„æ–‡æœ¬æ ¼å¼ï¼ˆç”± AI ç”Ÿæˆï¼‰ï¼š

```markdown
## è¯†å­—11 - å­—è¡¨

| # | å­— | æ‹¼éŸ³ | è‹±æ–‡ | literacy_sentence |
|----|----|----|----|----|
| 1 | é€š | tÅng | open; notify; connect | ä¾‹å¥... |
| 2 | è¿‡ | guÃ² | pass; fault | ä¾‹å¥... |

## è¯†å­—11 - è¯ç»„

| è¯ç»„ | æ‹¼éŸ³ | è‹±æ–‡ |
|----|----|---|
| é€šè¿‡ | tÅngguÃ² | by; pass through |

## è¯†å­—11 - è¯­æ³•

**è§„åˆ™1** (ä¸­æ–‡è¯´æ˜)
| è‹±æ–‡ç¿»è¯‘

## è¯†å­—11 - ç»ƒä¹ 

**å¡«ç©ºé¢˜**
1. é¢˜ç›®_A__B__C__D_ï¼Ÿ| ç­”æ¡ˆï¼šB | è¯ï¼šè¯è¯­

**é€‰æ‹©é¢˜**
1. é¢˜ç›®ï¼Ÿ| ç­”æ¡ˆï¼šD | A.é€‰|B.é€‰|C.é€‰|D.é€‰

**å¯¹è¯**
1. é—®ï¼šå¥å­ | ç­”ï¼šå¥å­
```

---

## ğŸš€ å®ç°æ­¥éª¤ï¼ˆç»™ Cursor çš„é¡ºåºï¼‰

### Phase 1: é¡¹ç›®åˆå§‹åŒ–
```
1. åˆ›å»º React + TypeScript é¡¹ç›®
2. é…ç½® Firebase SDK
3. è®¾ç½® Tailwind CSS
4. åˆ›å»ºæ–‡ä»¶å¤¹ç»“æ„ï¼š
   â”œâ”€â”€ components/
   â”œâ”€â”€ hooks/
   â”œâ”€â”€ services/
   â”œâ”€â”€ types/
   â””â”€â”€ utils/
```

### Phase 2: æ ¸å¿ƒè§£æé€»è¾‘
```
1. å®ç° Markdown è¡¨æ ¼è§£æå™¨
2. å®ç°å­—è¡¨è§£æå‡½æ•°
3. å®ç°è¯ç»„è§£æå‡½æ•°
4. å®ç°è¯­æ³•è§£æå‡½æ•°
5. å®ç°ç»ƒä¹ é¢˜è§£æå‡½æ•°
6. åˆ›å»º ParsedData TypeScript æ¥å£
```

### Phase 3: Firestore é›†æˆ
```
1. åˆå§‹åŒ– Firebase è®¤è¯
2. å®ç°æ•°æ®ä¸Šä¼ å‡½æ•°
3. å®ç°æ•°æ®è·å–å‡½æ•°
4. å®ç°é”™è¯¯å¤„ç†
5. æ·»åŠ åŠ è½½çŠ¶æ€ç®¡ç†
```

### Phase 4: UI å¼€å‘
```
1. åˆ›å»ºä¸»é¡µé¢å¸ƒå±€
2. å®ç°è¯¾ç¨‹é€‰æ‹©å™¨
3. å®ç° Markdown è¾“å…¥æ¡†
4. å®ç°é¢„è§ˆé¢æ¿
5. å®ç°ä¸Šä¼ æŒ‰é’®
6. å®ç°çŠ¶æ€æ¶ˆæ¯æ˜¾ç¤º
7. æ·»åŠ æˆåŠŸ/å¤±è´¥æç¤º
```

### Phase 5: æµ‹è¯• & ä¼˜åŒ–
```
1. æµ‹è¯• Markdown è§£æå‡†ç¡®æ€§
2. æµ‹è¯• Firestore æ•°æ®ä¿å­˜
3. æµ‹è¯•é”™è¯¯å¤„ç†
4. ä¼˜åŒ–æ€§èƒ½
5. ç¾åŒ– UI
```

---

## ğŸ“‹ ç»™ Cursor çš„ä»£ç ç”Ÿæˆæ¸…å•

### æ–‡ä»¶æ¸…å•
```
src/
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ firestore.ts          // Firestore ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ parsed-data.ts        // è§£ææ•°æ®ç±»å‹
â”‚   â””â”€â”€ components.ts         // UI ç»„ä»¶ç±»å‹
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ markdown-parser.ts    // Markdown è§£æå™¨
â”‚   â”œâ”€â”€ table-parser.ts       // è¡¨æ ¼è§£æå™¨
â”‚   â””â”€â”€ validators.ts         // æ•°æ®éªŒè¯
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ firestore.ts          // Firestore æ“ä½œ
â”‚   â””â”€â”€ firebase-config.ts    // Firebase åˆå§‹åŒ–
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useLesson.ts          // è¯¾ç¨‹æ•°æ® hook
â”‚   â””â”€â”€ useMarkdownParse.ts   // Markdown è§£æ hook
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ LessonSelector.tsx    // è¯¾ç¨‹é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ MarkdownEditor.tsx    // Markdown ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ PreviewPanel.tsx      // é¢„è§ˆé¢æ¿
â”‚   â”œâ”€â”€ UploadButton.tsx      // ä¸Šä¼ æŒ‰é’®
â”‚   â””â”€â”€ StatusMessage.tsx     // çŠ¶æ€æ¶ˆæ¯
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ Dashboard.tsx         // ä¸»é¡µé¢
â””â”€â”€ App.tsx
```

---

## ğŸ” Firebase é…ç½®ï¼ˆå‘Šè¯‰ Cursorï¼‰

```typescript
// éœ€è¦ä½ æä¾›çš„ç¯å¢ƒå˜é‡
REACT_APP_FIREBASE_API_KEY=xxx
REACT_APP_FIREBASE_AUTH_DOMAIN=xxx
REACT_APP_FIREBASE_PROJECT_ID=xxx
REACT_APP_FIREBASE_STORAGE_BUCKET=xxx
REACT_APP_FIREBASE_MESSAGING_SENDER_ID=xxx
REACT_APP_FIREBASE_APP_ID=xxx
```

---

## âœ… æˆåŠŸæ ‡å‡†

é¡µé¢å®Œæˆæ—¶åº”è¯¥èƒ½ï¼š

- âœ… ä»ä¸‹æ‹‰èœå•é€‰æ‹©è¯¾ç¨‹ï¼ˆè¯†å­—11ã€12ã€13...ï¼‰
- âœ… ç²˜è´´ Markdown æ ¼å¼çš„è¯¾ç¨‹æ•°æ®
- âœ… å®æ—¶é¢„è§ˆè§£æç»“æœ
- âœ… ä¸€é”®ä¸Šä¼ åˆ° Firestoreï¼ˆä¿å­˜æˆ–æ›´æ–°ï¼‰
- âœ… æ˜¾ç¤ºä¸Šä¼ ç»“æœï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
- âœ… æ”¯æŒå¯¼å‡ºå½“å‰è¯¾ç¨‹æ•°æ®ä¸º Markdown
- âœ… é”™è¯¯å¤„ç†ï¼ˆæ•°æ®éªŒè¯ã€ç½‘ç»œé”™è¯¯ç­‰ï¼‰

---

## ğŸ’¡ å¯é€‰å¢å¼ºåŠŸèƒ½

- æ‰¹é‡å¯¼å…¥å¤šä¸ªè¯¾ç¨‹
- æ•°æ®å¤‡ä»½ä¸æ¢å¤
- Markdown æ¨¡æ¿ç”Ÿæˆ
- æ•°æ®éªŒè¯è§„åˆ™è‡ªå®šä¹‰
- ç‰ˆæœ¬å†å²è®°å½•
- æƒé™ç®¡ç†ï¼ˆè§’è‰²æ§åˆ¶ï¼‰
- æ•°æ®æœç´¢ä¸ç­›é€‰

---

## ğŸ¯ ç»™ Cursor çš„æœ€ç»ˆæŒ‡ä»¤

```
è¯·æ ¹æ®ä»¥ä¸Šéœ€æ±‚ï¼Œä¸ºæˆ‘æ„å»ºä¸€ä¸ª Firestore åå°ç®¡ç†é¡µé¢ã€‚

å…³é”®è¦æ±‚ï¼š
1. React + TypeScript + Tailwind CSS
2. Firebase Firestore æ•°æ®åº“
3. Markdown è¡¨æ ¼è§£æå™¨
4. ç²˜è´´ Markdown â†’ è‡ªåŠ¨ä¸Šä¼  Firestore
5. å‹å¥½çš„ UI å’Œé”™è¯¯æç¤º
6. å®Œæ•´çš„ç±»å‹å®šä¹‰ï¼ˆTypeScriptï¼‰

ä» Phase 1 å¼€å§‹ï¼Œé€æ­¥å®ç°ã€‚
```

---

